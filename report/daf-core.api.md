## API Report File for "daf-core"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { DIDDocument } from 'did-resolver'
import { EventEmitter } from 'events'
import { Verifiable } from 'did-jwt-vc'
import { W3CCredential } from 'did-jwt-vc'
import { W3CPresentation } from 'did-jwt-vc'

// @public (undocumented)
export abstract class AbstractIdentityProvider {
  // (undocumented)
  abstract addKey(
    args: {
      identity: IIdentity
      key: IKey
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<any>
  // (undocumented)
  abstract addService(
    args: {
      identity: IIdentity
      service: IService
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<any>
  // (undocumented)
  abstract createIdentity(
    args: {
      kms?: string
      alias?: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<Omit<IIdentity, 'provider'>>
  // (undocumented)
  abstract deleteIdentity(args: IIdentity, context: IAgentContext<IKeyManager>): Promise<boolean>
  // (undocumented)
  abstract removeKey(
    args: {
      identity: IIdentity
      kid: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<any>
  // (undocumented)
  abstract removeService(
    args: {
      identity: IIdentity
      id: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<any>
}

// @public (undocumented)
export abstract class AbstractIdentityStore {
  // (undocumented)
  abstract delete(args: { did: string }): Promise<boolean>
  // (undocumented)
  abstract get(args: { did: string }): Promise<IIdentity>
  // (undocumented)
  abstract get(args: { alias: string }): Promise<IIdentity>
  // (undocumented)
  abstract import(args: IIdentity): Promise<boolean>
  // (undocumented)
  abstract list(): Promise<IIdentity[]>
}

// @public (undocumented)
export abstract class AbstractKeyManagementSystem {
  // (undocumented)
  abstract createKey(args: { type: TKeyType; meta?: any }): Promise<Omit<IKey, 'kms'>>
  // (undocumented)
  abstract decryptJWE(args: { key: IKey; data: string }): Promise<string>
  // (undocumented)
  abstract deleteKey(args: { kid: string }): Promise<boolean>
  // (undocumented)
  abstract encryptJWE(args: { key: IKey; to: Omit<IKey, 'kms'>; data: string }): Promise<string>
  // (undocumented)
  abstract signEthTX(args: { key: IKey; transaction: object }): Promise<string>
  // (undocumented)
  abstract signJWT(args: { key: IKey; data: string }): Promise<EcdsaSignature | string>
}

// @public (undocumented)
export abstract class AbstractKeyStore {
  // (undocumented)
  abstract delete(args: { kid: string }): Promise<boolean>
  // (undocumented)
  abstract get(args: { kid: string }): Promise<IKey>
  // (undocumented)
  abstract import(args: IKey): Promise<boolean>
}

// @public (undocumented)
export abstract class AbstractMessageHandler {
  // (undocumented)
  handle(message: Message, context: IAgentContext<{}>): Promise<Message>
  // (undocumented)
  nextMessageHandler?: AbstractMessageHandler
  // (undocumented)
  setNext(messageHandler: AbstractMessageHandler): AbstractMessageHandler
}

// @public (undocumented)
export abstract class AbstractSecretBox {
  // (undocumented)
  abstract decrypt(encryptedMessageHex: string): Promise<string>
  // (undocumented)
  abstract encrypt(message: string): Promise<string>
}

// @public (undocumented)
export class Agent implements IAgent {
  constructor(options?: IAgentOptions)
  // (undocumented)
  availableMethods(): string[]
  // (undocumented)
  execute<P = any, R = any>(method: string, args: P): Promise<R>
  // (undocumented)
  readonly methods: IPluginMethodMap
}

// @public
export function createAgent<T>(options: IAgentOptions): T

export { DIDDocument }

// @public (undocumented)
export interface EcdsaSignature {
  // (undocumented)
  r: string
  // (undocumented)
  recoveryParam?: number
  // (undocumented)
  s: string
}

// @public (undocumented)
export interface IAgent extends IAgentBase {
  // (undocumented)
  execute: <A = any, R = any>(method: string, args: A) => Promise<R>
}

// @public (undocumented)
export interface IAgentBase {
  // (undocumented)
  availableMethods: () => string[]
}

// @public (undocumented)
export interface IAgentContext<T extends IPluginMethodMap> {
  // (undocumented)
  agent: TAgent<T>
}

// @public (undocumented)
export interface IAgentOptions {
  // (undocumented)
  authorizedMethods?: string[]
  // (undocumented)
  context?: Record<string, any>
  // (undocumented)
  overrides?: IPluginMethodMap
  // (undocumented)
  plugins?: IAgentPlugin[]
}

// @public (undocumented)
export interface IAgentPlugin {
  // (undocumented)
  readonly methods: IPluginMethodMap
}

// @public (undocumented)
export interface IDataStore extends IPluginMethodMap {
  // (undocumented)
  dataStoreSaveMessage(args: IMessage): Promise<boolean>
  // (undocumented)
  dataStoreSaveVerifiableCredential(args: VerifiableCredential): Promise<boolean>
  // (undocumented)
  dataStoreSaveVerifiablePresentation(args: VerifiablePresentation): Promise<boolean>
}

// @public (undocumented)
export class IdentityManager implements IAgentPlugin {
  constructor(options: {
    providers: Record<string, AbstractIdentityProvider>
    defaultProvider: string
    store: AbstractIdentityStore
  })
  // (undocumented)
  identityManagerAddKey(
    {
      did,
      key,
      options,
    }: {
      did: string
      key: IKey
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<any>
  // (undocumented)
  identityManagerAddService(
    {
      did,
      service,
      options,
    }: {
      did: string
      service: IService
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<any>
  // (undocumented)
  identityManagerCreateIdentity(
    {
      provider,
      alias,
      kms,
      options,
    }: {
      alias?: string
      provider?: string
      kms?: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<IIdentity>
  // (undocumented)
  identityManagerDeleteIdentity(
    {
      did,
    }: {
      did: string
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<boolean>
  // (undocumented)
  identityManagerGetIdentities(): Promise<IIdentity[]>
  // (undocumented)
  identityManagerGetIdentity({ did }: { did: string }): Promise<IIdentity>
  // (undocumented)
  identityManagerGetOrCreateIdentity(
    {
      provider,
      alias,
      kms,
      options,
    }: {
      alias: string
      provider?: string
      kms?: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<IIdentity>
  // (undocumented)
  identityManagerGetProviders(): Promise<string[]>
  // (undocumented)
  identityManagerImportIdentity(identity: IIdentity): Promise<IIdentity>
  // (undocumented)
  identityManagerRemoveKey(
    {
      did,
      kid,
      options,
    }: {
      did: string
      kid: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<any>
  // (undocumented)
  identityManagerRemoveService(
    {
      did,
      id,
      options,
    }: {
      did: string
      id: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ): Promise<any>
  // (undocumented)
  readonly methods: IIdentityManager
}

// @public (undocumented)
export interface IHandleMessage extends IPluginMethodMap {
  // (undocumented)
  handleMessage: (
    args: {
      raw: string
      metaData?: IMetaData[]
      save?: boolean
    },
    context: IAgentContext<IDataStore>,
  ) => Promise<Message>
}

// @public (undocumented)
export interface IIdentity {
  // (undocumented)
  alias?: string
  // (undocumented)
  controllerKeyId: string
  // (undocumented)
  did: string
  // (undocumented)
  keys: IKey[]
  // (undocumented)
  provider: string
  // (undocumented)
  services: IService[]
}

// @public (undocumented)
export interface IIdentityManager extends IPluginMethodMap {
  // (undocumented)
  identityManagerAddKey: (
    args: {
      did: string
      key: IKey
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ) => Promise<any>
  // (undocumented)
  identityManagerAddService: (
    args: {
      did: string
      service: IService
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ) => Promise<any>
  // (undocumented)
  identityManagerCreateIdentity: (
    args: {
      alias?: string
      provider?: string
      kms?: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ) => Promise<IIdentity>
  // (undocumented)
  identityManagerDeleteIdentity: (
    args: {
      did: string
    },
    context: IAgentContext<IKeyManager>,
  ) => Promise<boolean>
  // (undocumented)
  identityManagerGetIdentities: () => Promise<IIdentity[]>
  // (undocumented)
  identityManagerGetIdentity: (args: { did: string }) => Promise<IIdentity>
  // (undocumented)
  identityManagerGetOrCreateIdentity: (
    args: {
      alias: string
      provider?: string
      kms?: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ) => Promise<IIdentity>
  // (undocumented)
  identityManagerGetProviders: () => Promise<string[]>
  // (undocumented)
  identityManagerImportIdentity: (args: IIdentity) => Promise<IIdentity>
  // (undocumented)
  identityManagerRemoveKey: (
    args: {
      did: string
      kid: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ) => Promise<any>
  // (undocumented)
  identityManagerRemoveService: (
    args: {
      did: string
      id: string
      options?: any
    },
    context: IAgentContext<IKeyManager>,
  ) => Promise<any>
}

// @public (undocumented)
export interface IKey {
  // (undocumented)
  kid: string
  // (undocumented)
  kms: string
  // (undocumented)
  meta?: Record<string, any>
  // (undocumented)
  privateKeyHex?: string
  // (undocumented)
  publicKeyHex: string
  // (undocumented)
  type: TKeyType
}

// @public (undocumented)
export interface IKeyManager extends IPluginMethodMap {
  // (undocumented)
  keyManagerCreateKey(args: IKeyManagerCreateKeyArgs): Promise<IKey>
  // (undocumented)
  keyManagerDecryptJWE(args: IKeyManagerDecryptJWEArgs): Promise<string>
  // (undocumented)
  keyManagerDeleteKey(args: IKeyManagerDeleteKeyArgs): Promise<boolean>
  // (undocumented)
  keyManagerEncryptJWE(args: IKeyManagerEncryptJWEArgs): Promise<string>
  // (undocumented)
  keyManagerGetKey(args: IKeyManagerGetKeyArgs): Promise<IKey>
  // (undocumented)
  keyManagerImportKey(args: IKey): Promise<boolean>
  // (undocumented)
  keyManagerSignEthTX(args: IKeyManagerSignEthTXArgs): Promise<string>
  // (undocumented)
  keyManagerSignJWT(args: IKeyManagerSignJWTArgs): Promise<EcdsaSignature | string>
}

// @public (undocumented)
export interface IKeyManagerCreateKeyArgs {
  // (undocumented)
  kms: string
  // (undocumented)
  meta?: Record<string, any>
  // (undocumented)
  type: TKeyType
}

// @public (undocumented)
export interface IKeyManagerDecryptJWEArgs {
  // (undocumented)
  data: string
  // (undocumented)
  kid: string
}

// @public (undocumented)
export interface IKeyManagerDeleteKeyArgs {
  // (undocumented)
  kid: string
}

// @public (undocumented)
export interface IKeyManagerEncryptJWEArgs {
  // (undocumented)
  data: string
  // (undocumented)
  kid: string
  // (undocumented)
  to: Omit<IKey, 'kms'>
}

// @public (undocumented)
export interface IKeyManagerGetKeyArgs {
  // (undocumented)
  kid: string
}

// @public (undocumented)
export interface IKeyManagerSignEthTXArgs {
  // (undocumented)
  kid: string
  // (undocumented)
  transaction: object
}

// @public (undocumented)
export interface IKeyManagerSignJWTArgs {
  // (undocumented)
  data: string
  // (undocumented)
  kid: string
}

// @public (undocumented)
export interface IMessage {
  // (undocumented)
  createdAt?: string
  // (undocumented)
  credentials?: VerifiableCredential[]
  // (undocumented)
  data?: any
  // (undocumented)
  expiresAt?: string
  // (undocumented)
  from?: string
  // (undocumented)
  id: string
  // (undocumented)
  metaData?: IMetaData[]
  // (undocumented)
  presentations?: VerifiablePresentation[]
  // (undocumented)
  raw?: string
  // (undocumented)
  replyTo?: string[]
  // (undocumented)
  replyUrl?: string
  // (undocumented)
  threadId?: string
  // (undocumented)
  to?: string
  // (undocumented)
  type: string
}

// @public (undocumented)
export interface IMetaData {
  // (undocumented)
  type: string
  // (undocumented)
  value?: string
}

// @public (undocumented)
export interface IPluginMethod {
  // (undocumented)
  (args: any, context: any): Promise<any>
}

// @public (undocumented)
export interface IPluginMethodMap extends Record<string, IPluginMethod> {}

// @public (undocumented)
export interface IResolveDid extends IPluginMethodMap {
  resolveDid(args: ResolveDidArgs): Promise<DIDDocument>
}

// @public (undocumented)
export interface IService {
  // (undocumented)
  description?: string
  // (undocumented)
  id: string
  // (undocumented)
  serviceEndpoint: string
  // (undocumented)
  type: string
}

// @public (undocumented)
export class KeyManager implements IAgentPlugin {
  constructor(options: { store: AbstractKeyStore; kms: Record<string, AbstractKeyManagementSystem> })
  // (undocumented)
  keyManagerCreateKey(args: IKeyManagerCreateKeyArgs): Promise<IKey>
  // (undocumented)
  keyManagerDecryptJWE({ kid, data }: IKeyManagerDecryptJWEArgs): Promise<string>
  // (undocumented)
  keyManagerDeleteKey({ kid }: IKeyManagerDeleteKeyArgs): Promise<boolean>
  // (undocumented)
  keyManagerEncryptJWE({ kid, to, data }: IKeyManagerEncryptJWEArgs): Promise<string>
  // (undocumented)
  keyManagerGetKey({ kid }: IKeyManagerGetKeyArgs): Promise<IKey>
  // (undocumented)
  keyManagerImportKey(key: IKey): Promise<boolean>
  // (undocumented)
  keyManagerSignEthTX({ kid, transaction }: IKeyManagerSignEthTXArgs): Promise<string>
  // (undocumented)
  keyManagerSignJWT({ kid, data }: IKeyManagerSignJWTArgs): Promise<EcdsaSignature | string>
  // (undocumented)
  readonly methods: IKeyManager
}

// @public (undocumented)
export class Message implements IMessage {
  constructor(data?: { raw: string; metaData?: IMetaData[] })
  // (undocumented)
  addMetaData(meta: IMetaData): void
  // (undocumented)
  createdAt?: string
  // (undocumented)
  credentials?: VerifiableCredential[]
  // (undocumented)
  data?: any
  // (undocumented)
  expiresAt?: string
  // (undocumented)
  from?: string
  // (undocumented)
  getLastMetaData(): IMetaData | null
  // (undocumented)
  id: string
  // (undocumented)
  isValid(): boolean
  // (undocumented)
  metaData?: IMetaData[]
  // (undocumented)
  presentations?: VerifiablePresentation[]
  // (undocumented)
  raw?: string
  // (undocumented)
  replyTo?: string[]
  // (undocumented)
  replyUrl?: string
  // (undocumented)
  threadId?: string
  // (undocumented)
  to?: string
  // (undocumented)
  type: string
}

// @public (undocumented)
export class MessageHandler extends EventEmitter implements IAgentPlugin {
  constructor(options: { messageHandlers: AbstractMessageHandler[] })
  // (undocumented)
  handleMessage(
    args: {
      raw: string
      metaData?: IMetaData[]
      save?: boolean
    },
    context: IAgentContext<IDataStore>,
  ): Promise<Message>
  // (undocumented)
  readonly methods: IHandleMessage
}

// @public (undocumented)
export interface RemoveContext<T extends IPluginMethod> {
  // (undocumented)
  (args?: Parameters<T>[0] | undefined): ReturnType<T>
}

// @public
export interface ResolveDidArgs {
  didUrl: string
}

// @public (undocumented)
export type TAgent<T extends IPluginMethodMap> = {
  [P in keyof T]: RemoveContext<T[P]>
} &
  Pick<IAgentBase, 'availableMethods'>

// @public (undocumented)
export type TKeyType = 'Ed25519' | 'Secp256k1'

// @public (undocumented)
export type VerifiableCredential = Verifiable<W3CCredential>

// @public (undocumented)
export type VerifiablePresentation = Verifiable<W3CPresentation>

export { W3CCredential }

export { W3CPresentation }
```
